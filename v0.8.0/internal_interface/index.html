<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internal Interfaces · HTTP.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>HTTP.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../public_interface/">Public Interface</a></li><li><a class="toctext" href="../internal_architecture/">Internal Architecture</a></li><li class="current"><a class="toctext" href>Internal Interfaces</a><ul class="internal"><li><a class="toctext" href="#Parser-Interface-1">Parser Interface</a></li><li><a class="toctext" href="#Messages-Interface-1">Messages Interface</a></li><li><a class="toctext" href="#IOExtras-Interface-1">IOExtras Interface</a></li><li><a class="toctext" href="#Streams-Interface-1">Streams Interface</a></li><li><a class="toctext" href="#Connection-Pooling-Interface-1">Connection Pooling Interface</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Internal Interfaces</a></li></ul><a class="edit-page" href="https://github.com/JuliaWeb/HTTP.jl/blob/master/docs/src/internal_interface.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Internal Interfaces</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Internal-Interfaces-1" href="#Internal-Interfaces-1">Internal Interfaces</a></h1><h2><a class="nav-anchor" id="Parser-Interface-1" href="#Parser-Interface-1">Parser Interface</a></h2><pre><code class="language-none">HTTP.Parsers.find_end_of_header
HTTP.Parsers.find_end_of_line
HTTP.Parsers.find_end_of_trailer
HTTP.Parsers.parse_status_line!
HTTP.Parsers.parse_request_line!
HTTP.Parsers.parse_header_field
HTTP.Parsers.parse_chunk_size</code></pre><h2><a class="nav-anchor" id="Messages-Interface-1" href="#Messages-Interface-1">Messages Interface</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.Request" href="#HTTP.Messages.Request"><code>HTTP.Messages.Request</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">Request &lt;: Message</code></pre><p>Represents a HTTP Request Message.</p><ul><li><p><code>method::String</code>  <a href="https://tools.ietf.org/html/rfc7230#section-3.1.1">RFC7230 3.1.1</a></p></li><li><p><code>target::String</code>  <a href="https://tools.ietf.org/html/rfc7230#section-5.3">RFC7230 5.3</a></p></li><li><p><code>version::VersionNumber</code>  <a href="https://tools.ietf.org/html/rfc7230#section-2.6">RFC7230 2.6</a></p></li><li><p><code>headers::Vector{Pair{String,String}}</code>  <a href="https://tools.ietf.org/html/rfc7230#section-3.2">RFC7230 3.2</a></p></li><li><p><code>body::Vector{UInt8}</code>  <a href="https://tools.ietf.org/html/rfc7230#section-3.3">RFC7230 3.3</a></p></li><li><p><code>response</code>, the <code>Response</code> to this <code>Request</code></p></li><li><p><code>txcount</code>, number of times this <code>Request</code> has been sent (see RetryRequest.jl).</p></li><li><p><code>parent</code>, the <code>Response</code> (if any) that led to this request (e.g. in the case of a redirect).  <a href="https://tools.ietf.org/html/rfc7231#section-6.4">RFC7230 6.4</a></p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L152-L179">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.Response" href="#HTTP.Messages.Response"><code>HTTP.Messages.Response</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">Response &lt;: Message</code></pre><p>Represents a HTTP Response Message.</p><ul><li><p><code>version::VersionNumber</code>  <a href="https://tools.ietf.org/html/rfc7230#section-2.6">RFC7230 2.6</a></p></li><li><p><code>status::Int16</code>  <a href="https://tools.ietf.org/html/rfc7230#section-3.1.2">RFC7230 3.1.2</a>  <a href="https://tools.ietf.org/html/rfc7231#section-6">RFC7231 6</a></p></li><li><p><code>headers::Vector{Pair{String,String}}</code>  <a href="https://tools.ietf.org/html/rfc7230#section-3.2">RFC7230 3.2</a></p></li><li><p><code>body::Vector{UInt8}</code>  <a href="https://tools.ietf.org/html/rfc7230#section-3.3">RFC7230 3.3</a></p></li><li><p><code>request</code>, the <code>Request</code> that yielded this <code>Response</code>.</p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L86-L105">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.iserror" href="#HTTP.Messages.iserror"><code>HTTP.Messages.iserror</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">iserror(::Response)</code></pre><p>Does this <code>Response</code> have an error status?</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L233-L237">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.isredirect" href="#HTTP.Messages.isredirect"><code>HTTP.Messages.isredirect</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">isredirect(::Response)</code></pre><p>Does this <code>Response</code> have a redirect status?</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L242-L246">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.ischunked" href="#HTTP.Messages.ischunked"><code>HTTP.Messages.ischunked</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">ischunked(::Message)</code></pre><p>Does the <code>Message</code> have a &quot;Transfer-Encoding: chunked&quot; header?</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L250-L254">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.issafe" href="#HTTP.Messages.issafe"><code>HTTP.Messages.issafe</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">issafe(::Request)</code></pre><p>https://tools.ietf.org/html/rfc7231#section-4.2.1</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L217-L221">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.isidempotent" href="#HTTP.Messages.isidempotent"><code>HTTP.Messages.isidempotent</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">isidempotent(::Request)</code></pre><p>https://tools.ietf.org/html/rfc7231#section-4.2.2</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L225-L229">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.header" href="#HTTP.Messages.header"><code>HTTP.Messages.header</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">header(::Message, key [, default=&quot;&quot;]) -&gt; String</code></pre><p>Get header value for <code>key</code> (case-insensitive).</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L308-L312">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.hasheader" href="#HTTP.Messages.hasheader"><code>HTTP.Messages.hasheader</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">hasheader(::Message, key) -&gt; Bool</code></pre><p>Does header value for <code>key</code> exist (case-insensitive)?</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L317-L321">source</a><div><div><pre><code class="language-none">hasheader(::Message, key, value) -&gt; Bool</code></pre><p>Does header for <code>key</code> match <code>value</code> (both case-insensitive)?</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L324-L328">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.setheader" href="#HTTP.Messages.setheader"><code>HTTP.Messages.setheader</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">setheader(::Message, key =&gt; value)</code></pre><p>Set header <code>value</code> for <code>key</code> (case-insensitive).</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L340-L344">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.defaultheader" href="#HTTP.Messages.defaultheader"><code>HTTP.Messages.defaultheader</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">defaultheader(::Message, key =&gt; value)</code></pre><p>Set header <code>value</code> for <code>key</code> if it is not already set.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L351-L355">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.appendheader" href="#HTTP.Messages.appendheader"><code>HTTP.Messages.appendheader</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">appendheader(::Message, key =&gt; value)</code></pre><p>Append a header value to <code>message.headers</code>.</p><p>If <code>key</code> is the same as the previous header, the <code>value</code> is <a href="https://stackoverflow.com/a/24502264">appended to the value of the previous header with a comma delimiter</a></p><p><code>Set-Cookie</code> headers are not comma-combined because <a href="https://tools.ietf.org/html/rfc6265#section-3">cookies often contain internal commas</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L363-L374">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.readheaders" href="#HTTP.Messages.readheaders"><code>HTTP.Messages.readheaders</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">readheaders(::IO, ::Message)</code></pre><p>Read headers (and startline) from an <code>IO</code> stream into a <code>Message</code> struct. Throw <code>EOFError</code> if input is incomplete.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L466-L471">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.MessageRequest.setuseragent!" href="#HTTP.MessageRequest.setuseragent!"><code>HTTP.MessageRequest.setuseragent!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Set the default User-Agent string to be used in each HTTP request. Can be manually overridden by passing an explicit <code>User-Agent</code> header.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/MessageRequest.jl#L52-L55">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.readchunksize" href="#HTTP.Messages.readchunksize"><code>HTTP.Messages.readchunksize</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Read chunk-size from an <code>IO</code> stream. After the final zero size chunk, read trailers into a <code>Message</code> struct.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L493-L496">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.headerscomplete-Tuple{HTTP.Messages.Response}" href="#HTTP.Messages.headerscomplete-Tuple{HTTP.Messages.Response}"><code>HTTP.Messages.headerscomplete</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">headerscomplete(::Message)</code></pre><p>Have the headers been read into this <code>Message</code>?</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L259-L263">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.writestartline" href="#HTTP.Messages.writestartline"><code>HTTP.Messages.writestartline</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">writestartline(::IO, ::Message)</code></pre><p>e.g. <code>&quot;GET /path HTTP/1.1\r\n&quot;</code> or <code>&quot;HTTP/1.1 200 OK\r\n&quot;</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L417-L421">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Messages.writeheaders" href="#HTTP.Messages.writeheaders"><code>HTTP.Messages.writeheaders</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">writeheaders(::IO, ::Message)</code></pre><p>Write <code>Message</code> start line and a line for each &quot;name: value&quot; pair and a trailing blank line.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L432-L437">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.write-Tuple{IO,HTTP.Messages.Message}" href="#Base.write-Tuple{IO,HTTP.Messages.Message}"><code>Base.write</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-none">write(::IO, ::Message)</code></pre><p>Write start line, headers and body of HTTP Message.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Messages.jl#L447-L451">source</a></section><h2><a class="nav-anchor" id="IOExtras-Interface-1" href="#IOExtras-Interface-1">IOExtras Interface</a></h2><pre><code class="language-none">HTTP.IOExtras
HTTP.IOExtras.unread!
HTTP.IOExtras.startwrite(::IO)
HTTP.IOExtras.isioerror</code></pre><h2><a class="nav-anchor" id="Streams-Interface-1" href="#Streams-Interface-1">Streams Interface</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Streams.closebody" href="#HTTP.Streams.closebody"><code>HTTP.Streams.closebody</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">closebody(::Stream)</code></pre><p>Write the final <code>0</code> chunk if needed.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Streams.jl#L103-L107">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="HTTP.Streams.isaborted" href="#HTTP.Streams.isaborted"><code>HTTP.Streams.isaborted</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">isaborted(::Stream{Response})</code></pre><p>Has the server signaled that it does not wish to receive the message body?</p><p>&quot;If [the response] indicates the server does not wish to receive the  message body and is closing the connection, the client SHOULD  immediately cease transmitting the body and close the connection.&quot; <a href="https://tools.ietf.org/html/rfc7230#section-6.5">RFC7230, 6.5</a></p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaWeb/HTTP.jl/blob/e9a83ef502ea88bbbd3803b42b9b9df77adb290d/src/Streams.jl#L309-L318">source</a></section><h2><a class="nav-anchor" id="Connection-Pooling-Interface-1" href="#Connection-Pooling-Interface-1">Connection Pooling Interface</a></h2><pre><code class="language-none">HTTP.ConnectionPool.Connection
HTTP.ConnectionPool.Transaction
HTTP.ConnectionPool.pool
HTTP.ConnectionPool.getconnection
HTTP.IOExtras.unread!(::HTTP.ConnectionPool.Transaction,::SubArray{UInt8,1,Array{UInt8,1},Tuple{UnitRange{Int64}},true})
HTTP.IOExtras.startwrite(::HTTP.ConnectionPool.Transaction)
HTTP.IOExtras.closewrite(::HTTP.ConnectionPool.Transaction)
HTTP.IOExtras.startread(::HTTP.ConnectionPool.Transaction)
HTTP.IOExtras.closeread(::HTTP.ConnectionPool.Transaction)</code></pre><footer><hr/><a class="previous" href="../internal_architecture/"><span class="direction">Previous</span><span class="title">Internal Architecture</span></a></footer></article></body></html>
